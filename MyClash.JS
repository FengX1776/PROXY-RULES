// å›½å†…DNSæœåŠ¡å™¨
const domesticNameservers = [
  "https://dns.alidns.com/dns-query", // é˜¿é‡Œäº‘å…¬å…±DNS
  "https://doh.pub/dns-query", // è…¾è®¯DNSPod
  "https://doh.360.cn/dns-query" // 360å®‰å…¨DNS
];
// å›½å¤–DNSæœåŠ¡å™¨
const foreignNameservers = [
  "https://1.1.1.1/dns-query", // Cloudflare(ä¸»)
  "https://1.0.0.1/dns-query", // Cloudflare(å¤‡)
  "https://208.67.222.222/dns-query", // OpenDNS(ä¸»)
  "https://208.67.220.220/dns-query", // OpenDNS(å¤‡)
  "https://194.242.2.2/dns-query", // Mullvad(ä¸»)
  "https://194.242.2.3/dns-query" // Mullvad(å¤‡)
];
// DNSé…ç½®
const dnsConfig = {
  "enable": true,
  "listen": "0.0.0.0:1053",
  "ipv6": true,
  "use-system-hosts": false,
  "cache-algorithm": "arc",
  "enhanced-mode": "fake-ip",
  "fake-ip-range": "198.18.0.1/16",
  "fake-ip-filter": [
    // æœ¬åœ°ä¸»æœº/è®¾å¤‡
    "+.lan",
    "+.local",
    // Windowsç½‘ç»œå‡ºç°å°åœ°çƒå›¾æ ‡
    "+.msftconnecttest.com",
    "+.msftncsi.com",
    // QQå¿«é€Ÿç™»å½•æ£€æµ‹å¤±è´¥
    "localhost.ptlogin2.qq.com",
    "localhost.sec.qq.com",
    // å¾®ä¿¡å¿«é€Ÿç™»å½•æ£€æµ‹å¤±è´¥
    "localhost.work.weixin.qq.com"
  ],
  "default-nameserver": ["223.5.5.5", "119.29.29.29", "1.1.1.1", "8.8.8.8"],
  "nameserver": [...domesticNameservers, ...foreignNameservers],
  "proxy-server-nameserver": [...domesticNameservers, ...foreignNameservers],
  "nameserver-policy": {
    "geosite:private,cn,geolocation-cn": domesticNameservers,
    "geosite:google,youtube,telegram,gfw,geolocation-!cn": foreignNameservers
  }
};
// è§„åˆ™é›†é€šç”¨é…ç½®
const ruleProviderCommon = {
  "type": "http",
  "format": "yaml",
  "interval": 86400
};
// è§„åˆ™é›†é…ç½®
const ruleProviders = {
  "BanAD1": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising_Classical.yaml",
    "path": "./Ruleset/Feng1776/Reject1.yaml"
  },
  "Reject": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt",
    "path": "./ruleset/Feng1776/Reject.yaml"
  },
  "icloud": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt",
    "path": "./ruleset/loyalsoldier/icloud.yaml"
  },
  "apple": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt",
    "path": "./ruleset/loyalsoldier/apple.yaml"
  },
  "google": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt",
    "path": "./ruleset/loyalsoldier/google.yaml"
  },
  "direct": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt",
    "path": "./ruleset/loyalsoldier/direct.yaml"
  },
  "private": {
    ...ruleProviderCommon,
    "behavior": "domain",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt",
    "path": "./ruleset/loyalsoldier/private.yaml"
  },
  "telegramcidr": {
    ...ruleProviderCommon,
    "behavior": "ipcidr",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt",
    "path": "./ruleset/loyalsoldier/telegramcidr.yaml"
  },
  "cncidr": {
    ...ruleProviderCommon,
    "behavior": "ipcidr",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt",
    "path": "./ruleset/loyalsoldier/cncidr.yaml"
  },
  "lancidr": {
    ...ruleProviderCommon,
    "behavior": "ipcidr",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt",
    "path": "./ruleset/loyalsoldier/lancidr.yaml"
  },
  "applications": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt",
    "path": "./ruleset/loyalsoldier/applications.yaml"
  },
  "openai": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml",
    "path": "./ruleset/blackmatrix7/openai.yaml"
  },
  "Speedtest": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Speedtest/Speedtest.yaml",
    "path": "./ruleset/loyalsoldier/Speedtest.yaml"
  },
  "Twitter": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml",
    "path": "./ruleset/loyalsoldier/twitter.yaml"
  },
  "Youtube": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml",
    "path": "./ruleset/loyalsoldier/Youtube.yaml"
  },
  "Game": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/Game.yaml",
    "path": "./ruleset/loyalsoldier/Game.yaml"
  },
  "GameDL1": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/GameDownload/GameDownload.yaml",
    "path": "./ruleset/loyalsoldier/GameDL.yaml"
  },
  "GameDL2": {
    ...ruleProviderCommon,
    "behavior": "classical",
    "url": "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/GameDownloadCN/GameDownloadCN.yaml",
    "path": "./ruleset/loyalsoldier/GameDL2.yaml"
  },
};
// è§„åˆ™
const rules = [
  // è‡ªå®šä¹‰è§„åˆ™
  "DOMAIN-SUFFIX,github.io,èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)", // Github Pages
  "DOMAIN,v2rayse.com,èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)", // V2rayseèŠ‚ç‚¹å·¥å…·
  // blackmatrix7 è§„åˆ™é›†
  "RULE-SET,openai,ChatGPT",
  // Loyalsoldier è§„åˆ™é›†
  "RULE-SET,Speedtest,èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)",
  "RULE-SET,Twitter,æ¨ç‰¹æ¨é€",
  "RULE-SET,Youtube,å›½å¤–åª’ä½“",
  "RULE-SET,Game,æ¸¸æˆå¹³å°",
  "RULE-SET,GameDL1,å…¨å±€ç›´è¿",
  "RULE-SET,GameDL2,å…¨å±€ç›´è¿",
  "RULE-SET,applications,å…¨å±€ç›´è¿",
  "RULE-SET,private,å…¨å±€ç›´è¿",
  "RULE-SET,Reject,å¹¿å‘Šæ‹¦æˆª",
  "RULE-SET,BanAD1,å¹¿å‘Šæ‹¦æˆª",
  "RULE-SET,icloud,å¾®è½¯æœåŠ¡",
  "RULE-SET,apple,è‹¹æœæœåŠ¡",
  "RULE-SET,direct,å…¨å±€ç›´è¿",
  "RULE-SET,lancidr,å…¨å±€ç›´è¿,no-resolve",
  "RULE-SET,cncidr,å…¨å±€ç›´è¿,no-resolve",
  "RULE-SET,telegramcidr,ç”µæŠ¥æ¶ˆæ¯,no-resolve",
  // å…¶ä»–è§„åˆ™
  "GEOIP,LAN,å…¨å±€ç›´è¿,no-resolve",
  "GEOIP,CN,å…¨å±€ç›´è¿,no-resolve",
  "MATCH,æ¼ç½‘ä¹‹é±¼"
];
// ä»£ç†ç»„é€šç”¨é…ç½®
const groupBaseOption = {
  "interval": 300,
  "timeout": 3000,
  "url": "https://www.google.com/generate_204",
  "lazy": true,
  "max-failed-times": 3,
  "hidden": false
};

const proxyURLTEST = ["æ–°åŠ å¡(å»¶è¿Ÿä¼˜é€‰)","é¦™æ¸¯(å»¶è¿Ÿä¼˜é€‰)","æ—¥æœ¬(å»¶è¿Ÿä¼˜é€‰)","å°æ¹¾(å»¶è¿Ÿä¼˜é€‰)","éŸ©å›½(å»¶è¿Ÿä¼˜é€‰)","é©¬æ¥è¥¿äºš(å»¶è¿Ÿä¼˜é€‰)","è¶Šå—(å»¶è¿Ÿä¼˜é€‰)","å°åº¦(å»¶è¿Ÿä¼˜é€‰)","å¾·å›½(å»¶è¿Ÿä¼˜é€‰)","è‹±å›½(å»¶è¿Ÿä¼˜é€‰)","æ¾³å¤§åˆ©äºš(å»¶è¿Ÿä¼˜é€‰)","åœŸè€³å…¶(å»¶è¿Ÿä¼˜é€‰)","ç¾å›½(å»¶è¿Ÿä¼˜é€‰)"]
const proxyLoadBalance = ["æ–°åŠ å¡(è´Ÿè½½å‡è¡¡)","é¦™æ¸¯(è´Ÿè½½å‡è¡¡)","æ—¥æœ¬(è´Ÿè½½å‡è¡¡)","å°æ¹¾(è´Ÿè½½å‡è¡¡)","éŸ©å›½(è´Ÿè½½å‡è¡¡)","é©¬æ¥è¥¿äºš(è´Ÿè½½å‡è¡¡)","è¶Šå—(è´Ÿè½½å‡è¡¡)","å°åº¦(è´Ÿè½½å‡è¡¡)","å¾·å›½(è´Ÿè½½å‡è¡¡)","è‹±å›½(è´Ÿè½½å‡è¡¡)","æ¾³å¤§åˆ©äºš(è´Ÿè½½å‡è¡¡)","åœŸè€³å…¶(è´Ÿè½½å‡è¡¡)","ç¾å›½(è´Ÿè½½å‡è¡¡)"]
const proxygroup = [
  {
    ...groupBaseOption,
    "name": "èŠ‚ç‚¹ä¿¡æ¯",
    "type": "load-balance",
    "include-all": true,
    "filter" : "å‰©ä½™|æµé‡|åˆ°æœŸ|å¥—é¤",
    "icon" : "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/openwrt.svg"
  },
  {
    ...groupBaseOption,
    "name": "èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)",
    "type": "select",
    "proxies": proxyURLTEST,
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg"
  }, 
  {
    ...groupBaseOption,
    "name": "èŠ‚ç‚¹é€‰æ‹©(è´Ÿè½½å‡è¡¡)",
    "type": "select",
    "proxies": proxyLoadBalance,
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg"
  }, 
  {
    ...groupBaseOption,
    "name": "å›½å¤–åª’ä½“",
    "type": "select",
    "proxies": ["èŠ‚ç‚¹é€‰æ‹©(è´Ÿè½½å‡è¡¡)","ç¾å›½(è´Ÿè½½å‡è¡¡)","æ—¥æœ¬(è´Ÿè½½å‡è¡¡)","éŸ©å›½(è´Ÿè½½å‡è¡¡)","å°æ¹¾(è´Ÿè½½å‡è¡¡)"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/youtube.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ¨ç‰¹æ¨é€",
    "type": "select",
    "proxies": ["æ–°åŠ å¡(è´Ÿè½½å‡è¡¡)","é¦™æ¸¯(è´Ÿè½½å‡è¡¡)","å°æ¹¾(è´Ÿè½½å‡è¡¡)","æ—¥æœ¬(è´Ÿè½½å‡è¡¡)","ç¾å›½(è´Ÿè½½å‡è¡¡)"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/twitter.svg"
  },
  {
    ...groupBaseOption,
    "name": "ç”µæŠ¥æ¶ˆæ¯",
    "type": "select",
    "proxies": ["èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)","é¦™æ¸¯(å»¶è¿Ÿä¼˜é€‰)","æ–°åŠ å¡(å»¶è¿Ÿä¼˜é€‰)","å…¨å±€ç›´è¿"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/telegram.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ¸¸æˆå¹³å°",
    "type": "select",
    "proxies": ["èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)","é¦™æ¸¯(å»¶è¿Ÿä¼˜é€‰)","æ—¥æœ¬(å»¶è¿Ÿä¼˜é€‰)","æ¾³å¤§åˆ©äºš(å»¶è¿Ÿä¼˜é€‰)","åœŸè€³å…¶(å»¶è¿Ÿä¼˜é€‰)","å…¨å±€ç›´è¿"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/steam.svg"
  },
  {
    ...groupBaseOption,
    "url": "https://chatgpt.com",
    "expected-status": "200",
    "name": "ChatGPT",
    "type": "select",
    "proxies": ["ç¾å›½(è´Ÿè½½å‡è¡¡)","æ—¥æœ¬(è´Ÿè½½å‡è¡¡)","æ¾³å¤§åˆ©äºš(è´Ÿè½½å‡è¡¡)","å…¨å±€ç›´è¿"],
    "filter": "AD|ğŸ‡¦ğŸ‡©|AE|ğŸ‡¦ğŸ‡ª|AF|ğŸ‡¦ğŸ‡«|AG|ğŸ‡¦ğŸ‡¬|AL|ğŸ‡¦ğŸ‡±|AM|ğŸ‡¦ğŸ‡²|AO|ğŸ‡¦ğŸ‡´|AR|ğŸ‡¦ğŸ‡·|AT|ğŸ‡¦ğŸ‡¹|AU|ğŸ‡¦ğŸ‡º|AZ|ğŸ‡¦ğŸ‡¿|BA|ğŸ‡§ğŸ‡¦|BB|ğŸ‡§ğŸ‡§|BD|ğŸ‡§ğŸ‡©|BE|ğŸ‡§ğŸ‡ª|BF|ğŸ‡§ğŸ‡«|BG|ğŸ‡§ğŸ‡¬|BH|ğŸ‡§ğŸ‡­|BI|ğŸ‡§ğŸ‡®|BJ|ğŸ‡§ğŸ‡¯|BN|ğŸ‡§ğŸ‡³|BO|ğŸ‡§ğŸ‡´|BR|ğŸ‡§ğŸ‡·|BS|ğŸ‡§ğŸ‡¸|BT|ğŸ‡§ğŸ‡¹|BW|ğŸ‡§ğŸ‡¼|BZ|ğŸ‡§ğŸ‡¿|CA|ğŸ‡¨ğŸ‡¦|CD|ğŸ‡¨ğŸ‡©|CF|ğŸ‡¨ğŸ‡«|CG|ğŸ‡¨ğŸ‡¬|CH|ğŸ‡¨ğŸ‡­|CI|ğŸ‡¨ğŸ‡®|CL|ğŸ‡¨ğŸ‡±|CM|ğŸ‡¨ğŸ‡²|CO|ğŸ‡¨ğŸ‡´|CR|ğŸ‡¨ğŸ‡·|CV|ğŸ‡¨ğŸ‡»|CY|ğŸ‡¨ğŸ‡¾|CZ|ğŸ‡¨ğŸ‡¿|DE|ğŸ‡©ğŸ‡ª|DJ|ğŸ‡©ğŸ‡¯|DK|ğŸ‡©ğŸ‡°|DM|ğŸ‡©ğŸ‡²|DO|ğŸ‡©ğŸ‡´|DZ|ğŸ‡©ğŸ‡¿|EC|ğŸ‡ªğŸ‡¨|EE|ğŸ‡ªğŸ‡ª|EG|ğŸ‡ªğŸ‡¬|ER|ğŸ‡ªğŸ‡·|ES|ğŸ‡ªğŸ‡¸|ET|ğŸ‡ªğŸ‡¹|FI|ğŸ‡«ğŸ‡®|FJ|ğŸ‡«ğŸ‡¯|FM|ğŸ‡«ğŸ‡²|FR|ğŸ‡«ğŸ‡·|GA|ğŸ‡¬ğŸ‡¦|GB|ğŸ‡¬ğŸ‡§|GD|ğŸ‡¬ğŸ‡©|GE|ğŸ‡¬ğŸ‡ª|GH|ğŸ‡¬ğŸ‡­|GM|ğŸ‡¬ğŸ‡²|GN|ğŸ‡¬ğŸ‡³|GQ|ğŸ‡¬ğŸ‡¶|GR|ğŸ‡¬ğŸ‡·|GT|ğŸ‡¬ğŸ‡¹|GW|ğŸ‡¬ğŸ‡¼|GY|ğŸ‡¬ğŸ‡¾|HN|ğŸ‡­ğŸ‡³|HR|ğŸ‡­ğŸ‡·|HT|ğŸ‡­ğŸ‡¹|HU|ğŸ‡­ğŸ‡º|ID|ğŸ‡®ğŸ‡©|IE|ğŸ‡®ğŸ‡ª|IL|ğŸ‡®ğŸ‡±|IN|ğŸ‡®ğŸ‡³|IQ|ğŸ‡®ğŸ‡¶|IS|ğŸ‡®ğŸ‡¸|IT|ğŸ‡®ğŸ‡¹|JM|ğŸ‡¯ğŸ‡²|JO|ğŸ‡¯ğŸ‡´|JP|ğŸ‡¯ğŸ‡µ|KE|ğŸ‡°ğŸ‡ª|KG|ğŸ‡°ğŸ‡¬|KH|ğŸ‡°ğŸ‡­|KI|ğŸ‡°ğŸ‡®|KM|ğŸ‡°ğŸ‡²|KN|ğŸ‡°ğŸ‡³|KR|ğŸ‡°ğŸ‡·|KW|ğŸ‡°ğŸ‡¼|KZ|ğŸ‡°ğŸ‡¿|LA|ğŸ‡±ğŸ‡¦|LB|ğŸ‡±ğŸ‡§|LC|ğŸ‡±ğŸ‡¨|LI|ğŸ‡±ğŸ‡®|LK|ğŸ‡±ğŸ‡°|LR|ğŸ‡±ğŸ‡·|LS|ğŸ‡±ğŸ‡¸|LT|ğŸ‡±ğŸ‡¹|LU|ğŸ‡±ğŸ‡º|LV|ğŸ‡±ğŸ‡»|LY|ğŸ‡±ğŸ‡¾|MA|ğŸ‡²ğŸ‡¦|MC|ğŸ‡²ğŸ‡¨|MD|ğŸ‡²ğŸ‡©|ME|ğŸ‡²ğŸ‡ª|MG|ğŸ‡²ğŸ‡¬|MH|ğŸ‡²ğŸ‡­|MK|ğŸ‡²ğŸ‡°|ML|ğŸ‡²ğŸ‡±|MM|ğŸ‡²ğŸ‡²|MN|ğŸ‡²ğŸ‡³|MR|ğŸ‡²ğŸ‡·|MT|ğŸ‡²ğŸ‡¹|MU|ğŸ‡²ğŸ‡º|MV|ğŸ‡²ğŸ‡»|MW|ğŸ‡²ğŸ‡¼|MX|ğŸ‡²ğŸ‡½|MY|ğŸ‡²ğŸ‡¾|MZ|ğŸ‡²ğŸ‡¿|NA|ğŸ‡³ğŸ‡¦|NE|ğŸ‡³ğŸ‡ª|NG|ğŸ‡³ğŸ‡¬|NI|ğŸ‡³ğŸ‡®|NL|ğŸ‡³ğŸ‡±|NO|ğŸ‡³ğŸ‡´|NP|ğŸ‡³ğŸ‡µ|NR|ğŸ‡³ğŸ‡·|NZ|ğŸ‡³ğŸ‡¿|OM|ğŸ‡´ğŸ‡²|PA|ğŸ‡µğŸ‡¦|PE|ğŸ‡µğŸ‡ª|PG|ğŸ‡µğŸ‡¬|PH|ğŸ‡µğŸ‡­|PK|ğŸ‡µğŸ‡°|PL|ğŸ‡µğŸ‡±|PS|ğŸ‡µğŸ‡¸|PT|ğŸ‡µğŸ‡¹|PW|ğŸ‡µğŸ‡¼|PY|ğŸ‡µğŸ‡¾|QA|ğŸ‡¶ğŸ‡¦|RO|ğŸ‡·ğŸ‡´|RS|ğŸ‡·ğŸ‡¸|RW|ğŸ‡·ğŸ‡¼|SA|ğŸ‡¸ğŸ‡¦|SB|ğŸ‡¸ğŸ‡§|SC|ğŸ‡¸ğŸ‡¨|SD|ğŸ‡¸ğŸ‡©|SE|ğŸ‡¸ğŸ‡ª|SG|ğŸ‡¸ğŸ‡¬|SI|ğŸ‡¸ğŸ‡®|SK|ğŸ‡¸ğŸ‡°|SL|ğŸ‡¸ğŸ‡±|SM|ğŸ‡¸ğŸ‡²|SN|ğŸ‡¸ğŸ‡³|SO|ğŸ‡¸ğŸ‡´|SR|ğŸ‡¸ğŸ‡·|SS|ğŸ‡¸ğŸ‡¸|ST|ğŸ‡¸ğŸ‡¹|SV|ğŸ‡¸ğŸ‡»|SZ|ğŸ‡¸ğŸ‡¿|TD|ğŸ‡¹ğŸ‡©|TG|ğŸ‡¹ğŸ‡¬|TH|ğŸ‡¹ğŸ‡­|TJ|ğŸ‡¹ğŸ‡¯|TL|ğŸ‡¹ğŸ‡±|TM|ğŸ‡¹ğŸ‡²|TN|ğŸ‡¹ğŸ‡³|TO|ğŸ‡¹ğŸ‡´|TR|ğŸ‡¹ğŸ‡·|TT|ğŸ‡¹ğŸ‡¹|TV|ğŸ‡¹ğŸ‡»|TW|ğŸ‡¹ğŸ‡¼|TZ|ğŸ‡¹ğŸ‡¿|UA|ğŸ‡ºğŸ‡¦|UG|ğŸ‡ºğŸ‡¬|US|ğŸ‡ºğŸ‡¸|UY|ğŸ‡ºğŸ‡¾|UZ|ğŸ‡ºğŸ‡¿|VA|ğŸ‡»ğŸ‡¦|VC|ğŸ‡»ğŸ‡¨|VN|ğŸ‡»ğŸ‡³|VU|ğŸ‡»ğŸ‡º|WS|ğŸ‡¼ğŸ‡¸|YE|ğŸ‡¾ğŸ‡ª|ZA|ğŸ‡¿ğŸ‡¦|ZM|ğŸ‡¿ğŸ‡²|ZW|ğŸ‡¿ğŸ‡¼",
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/chatgpt.svg"
  },
  {
    ...groupBaseOption,
    "name": "å¾®è½¯æœåŠ¡",
    "type": "select",
    "proxies": ["å…¨å±€ç›´è¿",...proxyURLTEST],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/microsoft.svg"
  },
  {
    ...groupBaseOption,
    "name": "è‹¹æœæœåŠ¡",
    "type": "select",
    "proxies": ["èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)","é¦™æ¸¯(è´Ÿè½½å‡è¡¡)","æ—¥æœ¬(è´Ÿè½½å‡è¡¡)","ç¾å›½(è´Ÿè½½å‡è¡¡)","å…¨å±€ç›´è¿"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/apple.svg"
  },
  {
    ...groupBaseOption,
    "name": "å¹¿å‘Šæ‹¦æˆª",
    "type": "select",
    "proxies": ["REJECT", "DIRECT"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/block.svg"
  },
  {
    ...groupBaseOption,
    "name": "å…¨å±€ç›´è¿",
    "type": "select",
    "proxies": ["DIRECT", "èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/link.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ¼ç½‘ä¹‹é±¼",
    "type": "select",
    "proxies": ["èŠ‚ç‚¹é€‰æ‹©(å»¶è¿Ÿä¼˜é€‰)", "å…¨å±€ç›´è¿"],
    "icon": "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fish.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ–°åŠ å¡(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "æ–°åŠ å¡", 
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/sg.svg"   
  },
  {
    ...groupBaseOption,
    "name": "æ–°åŠ å¡(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "æ–°åŠ å¡", 
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/sg.svg"   
  },
  {
    ...groupBaseOption,
    "name": "é¦™æ¸¯(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "é¦™æ¸¯", 
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/hk.svg"   
  },
  {
    ...groupBaseOption,
    "name": "é¦™æ¸¯(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "é¦™æ¸¯",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/hk.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ—¥æœ¬(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "æ—¥æœ¬",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/jp.svg"
  },
  {
    ...groupBaseOption,
    "name": "æ—¥æœ¬(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "æ—¥æœ¬",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/jp.svg"    
  },
  {
    ...groupBaseOption,
    "name": "å°æ¹¾(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "å°æ¹¾",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/tw.svg"    
  },
  {
    ...groupBaseOption,
    "name": "å°æ¹¾(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "å°æ¹¾", 
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/tw.svg"   
  },
  {
    ...groupBaseOption,
    "name": "éŸ©å›½(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "éŸ©å›½",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/kr.svg"
  },
  {
    ...groupBaseOption,
    "name": "éŸ©å›½(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "éŸ©å›½",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/kr.svg"
  },
  {
    ...groupBaseOption,
    "name": "é©¬æ¥è¥¿äºš(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "é©¬æ¥è¥¿äºš",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/my.svg"
  },
  {
    ...groupBaseOption,
    "name": "é©¬æ¥è¥¿äºš(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "é©¬æ¥è¥¿äºš",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/my.svg"    
  },
  {
    ...groupBaseOption,
    "name": "è¶Šå—(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "è¶Šå—",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/vn.svg"    
  },
  {
    ...groupBaseOption,
    "name": "è¶Šå—(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "è¶Šå—",  
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/vn.svg"  
  },
  {
    ...groupBaseOption,
    "name": "å°åº¦(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "å°åº¦",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/in.svg"
  },
  {
    ...groupBaseOption,
    "name": "å°åº¦(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "å°åº¦",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/in.svg"
  },
  {
    ...groupBaseOption,
    "name": "å¾·å›½(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "å¾·å›½",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/de.svg"    
  },
  {
    ...groupBaseOption,
    "name": "å¾·å›½(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "å¾·å›½",    
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/de.svg"
  },
  {
    ...groupBaseOption,
    "name": "è‹±å›½(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "è‹±å›½",   
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/gb.svg" 
  },
  {
    ...groupBaseOption,
    "name": "è‹±å›½(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "è‹±å›½",   
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/gb.svg" 
  },
  {
    ...groupBaseOption,
    "name": "æ¾³å¤§åˆ©äºš(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "æ¾³å¤§åˆ©äºš",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/au.svg"    
  },
  {
    ...groupBaseOption,
    "name": "æ¾³å¤§åˆ©äºš(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "æ¾³å¤§åˆ©äºš",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/au.svg"    
  },
  {
    ...groupBaseOption,
    "name": "åœŸè€³å…¶(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "åœŸè€³å…¶", 
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/tr.svg"   
  },
  {
    ...groupBaseOption,
    "name": "åœŸè€³å…¶(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "åœŸè€³å…¶",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/tr.svg"    
  },
  {
    ...groupBaseOption,
    "name": "ç¾å›½(å»¶è¿Ÿä¼˜é€‰)",
    "type": "url-test",
    "include-all": true,
    "filter" : "ç¾å›½",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/us.svg"    
  },
  {
    ...groupBaseOption,
    "name": "ç¾å›½(è´Ÿè½½å‡è¡¡)",
    "type": "load-balance",
    "include-all": true,
    "filter" : "ç¾å›½",
    "icon" : "https://cdn.jsdelivr.net/gh/hampusborgos/country-flags@main/svg/us.svg"
  },
];
// ç¨‹åºå…¥å£
function main(config) {
  const proxyCount = config?.proxies?.length ?? 0;
  const proxyProviderCount =
    typeof config?.["proxy-providers"] === "object" ? Object.keys(config["proxy-providers"]).length : 0;
  if (proxyCount === 0 && proxyProviderCount === 0) {
    throw new Error("é…ç½®æ–‡ä»¶ä¸­æœªæ‰¾åˆ°ä»»ä½•ä»£ç†");
  }

  // è¦†ç›–åŸé…ç½®ä¸­DNSé…ç½®
  config["dns"] = dnsConfig;

  // è¦†ç›–åŸé…ç½®ä¸­çš„ä»£ç†ç»„
  config["proxy-groups"] = proxygroup;

  // è¦†ç›–åŸé…ç½®ä¸­çš„è§„åˆ™
  config["rule-providers"] = ruleProviders;
  config["rules"] = rules;

  // è¿”å›ä¿®æ”¹åçš„é…ç½®
  return config;
}
